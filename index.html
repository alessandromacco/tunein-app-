<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tune In - Healing Frequencies</title>
    
    <!-- React & Dependencies -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Tone.js for professional pitch-shifting -->
    <script src="https://unpkg.com/tone@14.8.49/build/Tone.js"></script>
    
    <!-- Custom Styles -->
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700;900&display=swap');
        
        * { 
            font-family: 'Inter', sans-serif; 
        }
        
        .glass { 
            background: rgba(255, 255, 255, 0.05); 
            backdrop-filter: blur(20px); 
            border: 1px solid rgba(255, 255, 255, 0.1); 
        }
        
        .glow { 
            box-shadow: 0 0 40px rgba(168, 85, 247, 0.4), 0 0 80px rgba(236, 72, 153, 0.2); 
        }
        
        .frequency-pulse { 
            animation: pulse 2s ease-in-out infinite; 
        }
        
        @keyframes pulse { 
            0%, 100% { 
                transform: scale(1); 
                opacity: 0.9; 
            } 
            50% { 
                transform: scale(1.02); 
                opacity: 1; 
            } 
        }

        .fade-in {
            animation: fadeIn 0.5s ease-in;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
    </style>
</head>
<body>
    <div id="root"></div>
    
    <script type="text/babel">
        const { useState, useEffect, useRef } = React;

        // ========================================
        // SVG ICONS
        // ========================================
        const Play = (props) => (
            <svg {...props} xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2">
                <polygon points="5 3 19 12 5 21 5 3"></polygon>
            </svg>
        );
        
        const Pause = (props) => (
            <svg {...props} xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2">
                <rect x="6" y="4" width="4" height="16"></rect>
                <rect x="14" y="4" width="4" height="16"></rect>
            </svg>
        );
        
        const Volume2 = (props) => (
            <svg {...props} xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2">
                <polygon points="11 5 6 9 2 9 2 15 6 15 11 19 11 5"></polygon>
                <path d="M15.54 8.46a5 5 0 0 1 0 7.07"></path>
                <path d="M19.07 4.93a10 10 0 0 1 0 14.14"></path>
            </svg>
        );
        
        const Music = (props) => (
            <svg {...props} xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2">
                <path d="M9 18V5l12-2v13"></path>
                <circle cx="6" cy="18" r="3"></circle>
                <circle cx="18" cy="16" r="3"></circle>
            </svg>
        );

        const Heart = (props) => (
            <svg {...props} xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2">
                <path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"></path>
            </svg>
        );

        const Users = (props) => (
            <svg {...props} xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2">
                <path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"></path>
                <circle cx="9" cy="7" r="4"></circle>
                <path d="M23 21v-2a4 4 0 0 0-3-3.87"></path>
                <path d="M16 3.13a4 4 0 0 1 0 7.75"></path>
            </svg>
        );

        // ========================================
        // TRANSLATIONS & DATA
        // ========================================
        const TRANSLATIONS = {
          it: {
            title: "Tune In",
            subtitle: "Sincronizzazione di Frequenze di Guarigione",
            preset: "Preset",
            custom: "Personalizzato",
            howItWorks: "Come Funziona",
            mission: "Vision",
            about: "Chi Siamo",
            track: "Traccia",
            selectTrack: "Seleziona traccia audio",
            description: "La fisica delle vibrazioni √® alla base delle pratiche di guarigione sonora. Specifiche frequenze influenzano l'attivit√† delle onde cerebrali attraverso l'entrainment neurale, sincronizzando i ritmi biologici. Gli effetti misurabili includono riduzione di frequenza cardiaca, pressione sanguigna e cortisolo. Le frequenze Solfeggio sono toni della scala usata nella musica sacra medievale, riscoperta negli anni '70. Nella tradizione yogica, queste frequenze corrispondono ai sette chakra principali, centri energetici lungo la colonna vertebrale che regolano aspetti fisici, emotivi e spirituali dell'essere.",
            missionText: "La connessione simultanea di molteplici coscienze su specifiche frequenze crea fenomeni di risonanza collettiva. Quando gruppi di persone sincronizzano le proprie onde cerebrali attraverso stimoli sonori identici, si osserva un allineamento dei campi bioelettrici individuali. Questo fenomeno, studiato nelle neuroscienze sociali, suggerisce che la sincronizzazione di frequenze possa facilitare stati di coerenza collettiva e influenzare il campo energetico condiviso.",
            aboutText: "Questo player web-based genera frequenze in tempo reale usando la Web Audio API. A differenza dello streaming compresso (YouTube, Twitch, Spotify), il processamento avviene localmente nel browser, preservando l'integrit√† matematica delle frequenze. Ogni frequenza Solfeggio corrisponde a specifiche lunghezze d'onda che, secondo la tradizione e alcune ricerche preliminari, interagiscono con i centri energetici del corpo umano.",
            usersOnline: "ascoltatori connessi",
            footer: "üéµ Pure Frequencies ¬∑ Local Processing ¬∑ No Compression üéµ",
            musicCredit: "Music: Kevin MacLeod (CC BY 4.0)",
            copyright: "¬© 2025 Tune In ¬∑ Frequency Healing"
          },
          en: {
            title: "Tune In",
            subtitle: "Healing Frequency Synchronization",
            preset: "Preset",
            custom: "Custom",
            howItWorks: "How It Works",
            mission: "Vision",
            about: "About",
            track: "Track",
            selectTrack: "Select audio track",
            description: "The physics of vibrations is the foundation of sound healing practices. Specific frequencies influence brainwave activity through neural entrainment, synchronizing biological rhythms. Measurable effects include reduced heart rate, blood pressure, and cortisol levels. Solfeggio frequencies are tones from the scale used in medieval sacred music, rediscovered in the 1970s. In yogic tradition, these frequencies correspond to the seven main chakras, energy centers along the spine that regulate physical, emotional, and spiritual aspects of being.",
            missionText: "The simultaneous connection of multiple consciousnesses on specific frequencies creates collective resonance phenomena. When groups of people synchronize their brainwaves through identical sound stimuli, an alignment of individual bioelectric fields is observed. This phenomenon, studied in social neuroscience, suggests that frequency synchronization may facilitate states of collective coherence and influence the shared energetic field.",
            aboutText: "This web-based player generates frequencies in real-time using the Web Audio API. Unlike compressed streaming (YouTube, Twitch, Spotify), processing occurs locally in the browser, preserving the mathematical integrity of frequencies. Each Solfeggio frequency corresponds to specific wavelengths that, according to tradition and some preliminary research, interact with the human body's energy centers.",
            usersOnline: "listeners connected",
            footer: "üéµ Pure Frequencies ¬∑ Local Processing ¬∑ No Compression üéµ",
            musicCredit: "Music: Kevin MacLeod (CC BY 4.0)",
            copyright: "¬© 2025 Tune In ¬∑ Frequency Healing"
          }
        };

        const PRESET_FREQUENCIES = {
          it: [
            { hz: 396, name: "396 Hz", title: "Radicamento", chakra: "Muladhara", description: "Riduce ansia e paura, stabilizza lo stato emotivo. Scioglie senso di colpa e tensioni profonde. Favorisce radicamento e sicurezza interiore.", color: "#ef4444" },
            { hz: 417, name: "417 Hz", title: "Cambiamento", chakra: "Svadhisthana", description: "Rimuove energia negativa e schemi comportamentali dannosi. Centro della creativit√†. Facilita trasformazione e nuovi inizi.", color: "#f59e0b" },
            { hz: 432, name: "432 Hz", title: "Armonia universale", chakra: "", description: "Riduce frequenza cardiaca e pressione sanguigna. Risuona con le vibrazioni naturali dell'universo. Rilassamento profondo e allineamento.", color: "#10b981" },
            { hz: 440, name: "440 Hz", title: "Standard occidentale", chakra: "", description: "Frequenza di riferimento internazionale dal 1950. Ottimale per concentrazione e attivit√† ad alta intensit√†. Focus mentale e produttivit√†.", color: "#3b82f6" },
            { hz: 528, name: "528 Hz", title: "Frequenza dell'amore", chakra: "Manipura", description: "Riduzione degli ormoni dello stress in 5 minuti. Centro della trasformazione. Chiarezza mentale e riparazione energetica.", color: "#8b5cf6" },
            { hz: 639, name: "639 Hz", title: "Connessione", chakra: "Anahata", description: "Bilancia emozioni, guarisce ferite da relazioni tossiche. Centro della compassione. Migliora comunicazione e relazioni interpersonali.", color: "#ec4899" },
            { hz: 741, name: "741 Hz", title: "Espressione", chakra: "Vishuddha", description: "Purificazione e risveglio intuitivo. Centro dell'espressione. Favorisce problem-solving e autoespressione autentica.", color: "#f97316" },
            { hz: 852, name: "852 Hz", title: "Intuizione", chakra: "Ajna", description: "Riduzione del 40% dei livelli di cortisolo. Risveglia saggezza interiore e connessione con coscienza superiore. Intuizione profonda.", color: "#06b6d4" },
            { hz: 963, name: "963 Hz", title: "Unit√†", chakra: "Sahasrara", description: "Attiva la ghiandola pineale, connessione con il divino e coscienza universale. Esperienza di unit√† con il Tutto.", color: "#a855f7" }
          ],
          en: [
            { hz: 396, name: "396 Hz", title: "Grounding", chakra: "Muladhara", description: "Reduces anxiety and fear, stabilizes emotional state. Dissolves guilt and deep tensions. Promotes grounding and inner security.", color: "#ef4444" },
            { hz: 417, name: "417 Hz", title: "Change", chakra: "Svadhisthana", description: "Removes negative energy and harmful behavioral patterns. Creativity center. Facilitates transformation and new beginnings.", color: "#f59e0b" },
            { hz: 432, name: "432 Hz", title: "Universal harmony", chakra: "", description: "Reduces heart rate and blood pressure. Resonates with natural vibrations of the universe. Deep relaxation and alignment.", color: "#10b981" },
            { hz: 440, name: "440 Hz", title: "Western standard", chakra: "", description: "International reference frequency since 1950. Optimal for concentration and high-intensity activities. Mental focus and productivity.", color: "#3b82f6" },
            { hz: 528, name: "528 Hz", title: "Love frequency", chakra: "Manipura", description: "Stress hormone reduction in 5 minutes. Transformation center. Mental clarity and energetic repair.", color: "#8b5cf6" },
            { hz: 639, name: "639 Hz", title: "Connection", chakra: "Anahata", description: "Balances emotions, heals wounds from toxic relationships. Compassion center. Improves communication and interpersonal relationships.", color: "#ec4899" },
            { hz: 741, name: "741 Hz", title: "Expression", chakra: "Vishuddha", description: "Purification and intuitive awakening. Expression center. Promotes problem-solving and authentic self-expression.", color: "#f97316" },
            { hz: 852, name: "852 Hz", title: "Intuition", chakra: "Ajna", description: "40% reduction in cortisol levels. Awakens inner wisdom and connection with higher consciousness. Deep intuition.", color: "#06b6d4" },
            { hz: 963, name: "963 Hz", title: "Unity", chakra: "Sahasrara", description: "Activates pineal gland, connection with the divine and universal consciousness. Experience of unity with the All.", color: "#a855f7" }
          ]
        };

        // Audio tracks library - MP3 files for mobile compatibility
        const AUDIO_TRACKS = {
          it: [
            { 
              id: 'soaring', 
              file: 'soaring.mp3', 
              name: 'Soaring', 
              duration: '6 min',
              description: 'Synth ambient leggero e ascendente',
              artist: 'Kevin MacLeod'
            },
            { 
              id: 'ancient-winds', 
              file: 'ancient-winds.mp3', 
              name: 'Ancient Winds', 
              duration: '58 min',
              description: 'Atmosfera eterea e contemplativa',
              artist: 'Kevin MacLeod'
            },
            { 
              id: 'ethereal', 
              file: 'ethereal-relaxation.mp3', 
              name: 'Ethereal Relaxation', 
              duration: '28 min',
              description: 'Rilassamento profondo e meditativo',
              artist: 'Kevin MacLeod'
            },
            { 
              id: 'fluidscape', 
              file: 'fluidscape.mp3', 
              name: 'Fluidscape', 
              duration: '30 min',
              description: 'Paesaggio sonoro fluido e cosmico',
              artist: 'Kevin MacLeod'
            }
          ],
          en: [
            { 
              id: 'soaring', 
              file: 'soaring.mp3', 
              name: 'Soaring', 
              duration: '6 min',
              description: 'Light ascending synth ambient',
              artist: 'Kevin MacLeod'
            },
            { 
              id: 'ancient-winds', 
              file: 'ancient-winds.mp3', 
              name: 'Ancient Winds', 
              duration: '58 min',
              description: 'Ethereal contemplative atmosphere',
              artist: 'Kevin MacLeod'
            },
            { 
              id: 'ethereal', 
              file: 'ethereal-relaxation.mp3', 
              name: 'Ethereal Relaxation', 
              duration: '28 min',
              description: 'Deep meditative relaxation',
              artist: 'Kevin MacLeod'
            },
            { 
              id: 'fluidscape', 
              file: 'fluidscape.mp3', 
              name: 'Fluidscape', 
              duration: '30 min',
              description: 'Fluid cosmic soundscape',
              artist: 'Kevin MacLeod'
            }
          ]
        };

        // ========================================
        // MAIN COMPONENT
        // ========================================
        function TuneIn() {
          const [lang, setLang] = useState('it');
          const [selectedFreq, setSelectedFreq] = useState(432);
          const [customFreq, setCustomFreq] = useState(432);
          const [isPlaying, setIsPlaying] = useState(false);
          const [currentTime, setCurrentTime] = useState(0);
          const [duration, setDuration] = useState(0);
          const [volume, setVolume] = useState(0.7);
          const [isCustomMode, setIsCustomMode] = useState(false);
          const [showInfo, setShowInfo] = useState(false);
          const [showMission, setShowMission] = useState(false);
          const [showAbout, setShowAbout] = useState(false);
          const [usersOnline] = useState(Math.floor(Math.random() * 50) + 20);
          const [isLoading, setIsLoading] = useState(true);
          const [selectedTrack, setSelectedTrack] = useState('soaring');
          const [showTrackInfo, setShowTrackInfo] = useState(false);
          
          const playerRef = useRef(null);
          const pitchShiftRef = useRef(null);
          const volumeNodeRef = useRef(null);
          const isInitializedRef = useRef(false);

          const STANDARD_FREQ = 440;
          const t = TRANSLATIONS[lang];
          const frequencies = PRESET_FREQUENCIES[lang];
          const tracks = AUDIO_TRACKS[lang];
          const currentTrack = tracks.find(track => track.id === selectedTrack);
          // URL encode spaces and special characters
          const AUDIO_URL = `https://tunein.b-cdn.net/${encodeURIComponent(currentTrack.file)}`;

          // Initialize Tone.js Audio
          useEffect(() => {
            const initAudio = async () => {
              try {
                setIsLoading(true);
                
                playerRef.current = new Tone.Player({
                  url: AUDIO_URL,
                  loop: true,
                  onload: () => {
                    setDuration(playerRef.current.buffer.duration);
                    setIsLoading(false);
                    console.log('‚úÖ Audio loaded successfully:', AUDIO_URL);
                    console.log('Duration:', playerRef.current.buffer.duration, 'seconds');
                  },
                  onerror: (error) => {
                    console.error('‚ùå Error loading audio:', AUDIO_URL);
                    console.error('Error details:', error);
                    setIsLoading(false);
                    alert(`Errore caricamento audio: ${currentTrack.name}\nVerifica che il file esista su BunnyCDN`);
                  }
                });

                pitchShiftRef.current = new Tone.PitchShift({
                  pitch: 0,
                  windowSize: 0.1,
                  delayTime: 0,
                  feedback: 0
                });

                volumeNodeRef.current = new Tone.Volume(-4);

                playerRef.current.chain(
                  pitchShiftRef.current,
                  volumeNodeRef.current,
                  Tone.Destination
                );

                isInitializedRef.current = true;

                const interval = setInterval(() => {
                  if (playerRef.current && playerRef.current.state === 'started') {
                    const progress = Tone.Transport.seconds % playerRef.current.buffer.duration;
                    setCurrentTime(progress);
                  }
                }, 100);

                return () => clearInterval(interval);
              } catch (error) {
                console.error('Error initializing audio:', error);
                setIsLoading(false);
              }
            };

            initAudio();

            return () => {
              if (playerRef.current) {
                playerRef.current.stop();
                playerRef.current.dispose();
              }
              if (pitchShiftRef.current) {
                pitchShiftRef.current.dispose();
              }
              if (volumeNodeRef.current) {
                volumeNodeRef.current.dispose();
              }
            };
          }, [selectedTrack, AUDIO_URL]);

          useEffect(() => {
            if (volumeNodeRef.current) {
              const db = volume === 0 ? -Infinity : 20 * Math.log10(volume);
              volumeNodeRef.current.volume.value = db;
            }
          }, [volume]);

          useEffect(() => {
            if (!pitchShiftRef.current || !isInitializedRef.current) return;

            const targetFreq = isCustomMode ? customFreq : selectedFreq;
            const semitones = 12 * Math.log2(targetFreq / STANDARD_FREQ);
            
            // Direct assignment (works reliably)
            pitchShiftRef.current.pitch = semitones;
            
            console.log(`Frequency: ${targetFreq}Hz, Semitones: ${semitones.toFixed(2)}`);
          }, [selectedFreq, customFreq, isCustomMode]);

          const handlePlayPause = async () => {
            if (!isInitializedRef.current || isLoading) return;

            try {
              await Tone.start();
              
              if (isPlaying) {
                playerRef.current.stop();
                Tone.Transport.stop();
                setIsPlaying(false);
              } else {
                Tone.Transport.start();
                playerRef.current.start();
                setIsPlaying(true);
              }
            } catch (error) {
              console.error('Error toggling playback:', error);
            }
          };

          const handleSeek = (e) => {
            if (!playerRef.current || !duration) return;
            
            const seekTime = parseFloat(e.target.value);
            playerRef.current.seek(seekTime);
            setCurrentTime(seekTime);
          };

          const formatTime = (seconds) => {
            const h = Math.floor(seconds / 3600);
            const m = Math.floor((seconds % 3600) / 60);
            const s = Math.floor(seconds % 60);
            if (h > 0) return `${h}:${m.toString().padStart(2, '0')}:${s.toString().padStart(2, '0')}`;
            return `${m}:${s.toString().padStart(2, '0')}`;
          };

          const getFrequencyColor = () => {
            const freq = isCustomMode ? customFreq : selectedFreq;
            const preset = frequencies.find(p => p.hz === freq);
            return preset ? preset.color : '#8b5cf6';
          };

          const currentPreset = frequencies.find(p => p.hz === selectedFreq);

          return (
            <div className="min-h-screen bg-gradient-to-br from-indigo-950 via-purple-950 to-pink-950 relative overflow-hidden">
              
              <div className="absolute inset-0 opacity-20">
                <div className="absolute top-1/4 left-1/4 w-96 h-96 bg-purple-500 rounded-full blur-3xl"></div>
                <div className="absolute bottom-1/4 right-1/4 w-96 h-96 bg-pink-500 rounded-full blur-3xl"></div>
                <div className="absolute top-1/2 left-1/2 w-96 h-96 bg-cyan-500 rounded-full blur-3xl"></div>
              </div>

              <div className="absolute top-4 right-4 z-20 flex items-center gap-4">
                <div className="glass px-4 py-2 rounded-lg flex items-center gap-2">
                  <Users className="w-5 h-5 text-green-400" />
                  <span className="text-white font-semibold">{usersOnline}</span>
                  <span className="text-purple-300 text-sm">{t.usersOnline}</span>
                </div>
                <button 
                  onClick={() => setLang('it')} 
                  className={`px-4 py-2 rounded-lg font-semibold transition-all ${lang === 'it' ? 'bg-purple-500 text-white' : 'glass text-purple-300 hover:bg-white/10'}`}
                >
                  üáÆüáπ
                </button>
                <button 
                  onClick={() => setLang('en')} 
                  className={`px-4 py-2 rounded-lg font-semibold transition-all ${lang === 'en' ? 'bg-purple-500 text-white' : 'glass text-purple-300 hover:bg-white/10'}`}
                >
                  üá¨üáß
                </button>
              </div>

              <div className="relative z-10 max-w-7xl mx-auto px-4 py-8">
                
                <div className="text-center mb-8">
                  <div className="inline-flex items-center gap-3 mb-4">
                    <Heart className="w-12 h-12 text-pink-400 animate-pulse" />
                    <h1 className="text-5xl md:text-6xl font-black text-white tracking-tight">
                      {t.title}
                    </h1>
                  </div>
                  <p className="text-purple-300 text-sm uppercase tracking-widest font-light">{t.subtitle}</p>
                </div>

                <div className="flex justify-center gap-3 mb-8">
                  <button 
                    onClick={() => { setShowMission(!showMission); setShowAbout(false); setShowInfo(false); }}
                    className="glass px-6 py-3 rounded-xl text-purple-300 hover:bg-white/10 transition-all font-semibold flex items-center gap-2"
                  >
                    <Heart className="w-5 h-5" />
                    {t.mission}
                  </button>
                  <button 
                    onClick={() => { setShowAbout(!showAbout); setShowMission(false); setShowInfo(false); }}
                    className="glass px-6 py-3 rounded-xl text-purple-300 hover:bg-white/10 transition-all font-semibold flex items-center gap-2"
                  >
                    <Users className="w-5 h-5" />
                    {t.about}
                  </button>
                </div>

                {showMission && (
                  <div className="fade-in glass rounded-3xl p-8 mb-8 border-2 border-pink-500/30">
                    <h3 className="text-2xl font-bold text-white mb-4 flex items-center gap-2">
                      <Heart className="w-6 h-6 text-pink-400" />
                      {t.mission}
                    </h3>
                    <p className="text-purple-200 leading-relaxed">{t.missionText}</p>
                  </div>
                )}

                {showAbout && (
                  <div className="fade-in glass rounded-3xl p-8 mb-8 border-2 border-cyan-500/30">
                    <h3 className="text-2xl font-bold text-white mb-4 flex items-center gap-2">
                      <Users className="w-6 h-6 text-cyan-400" />
                      {t.about}
                    </h3>
                    <p className="text-purple-200 leading-relaxed">{t.aboutText}</p>
                  </div>
                )}

                <div className="glass rounded-3xl p-8 md:p-12">
                  
                  {isLoading && (
                    <div className="text-center py-12 mb-8">
                      <div className="inline-block animate-spin rounded-full h-16 w-16 border-t-4 border-b-4 border-purple-500 mb-4"></div>
                      <p className="text-purple-300 text-lg">Caricamento audio...</p>
                    </div>
                  )}

                  {!isLoading && (
                    <>
                  <div 
                    className="frequency-pulse relative mb-10 text-center py-12 rounded-3xl border-2 transition-all duration-300" 
                    style={{ 
                      borderColor: getFrequencyColor(),
                      background: `linear-gradient(135deg, ${getFrequencyColor()}15, ${getFrequencyColor()}25)`
                    }}
                  >
                    <div 
                      className="text-8xl md:text-9xl font-black text-white mb-2 tracking-tighter" 
                      style={{ textShadow: `0 0 40px ${getFrequencyColor()}` }}
                    >
                      {isCustomMode ? customFreq : selectedFreq}
                    </div>
                    <div className="text-3xl font-light text-purple-200 tracking-wider">Hz</div>
                    
                    {!isCustomMode && currentPreset && (
                      <div className="mt-4">
                        <div className="text-2xl text-white font-semibold">{currentPreset.title}</div>
                        {currentPreset.chakra && <div className="text-purple-300 text-sm mt-1">{currentPreset.chakra}</div>}
                        <div className="text-purple-200 text-sm mt-3 max-w-2xl mx-auto leading-relaxed">{currentPreset.description}</div>
                      </div>
                    )}
                  </div>

                  {/* Track Selector - Modern Design */}
                  <div className="mb-10">
                    <h2 className="text-3xl md:text-4xl font-black text-center mb-6 bg-gradient-to-r from-cyan-400 via-purple-400 to-pink-400 bg-clip-text text-transparent">
                      Select Your Track
                    </h2>
                    
                    <div className="grid grid-cols-2 md:grid-cols-4 gap-4 max-w-4xl mx-auto">
                      {tracks.map((track, index) => {
                        const colors = [
                          { from: 'from-cyan-500', to: 'to-blue-500', glow: 'shadow-cyan-500/50' },
                          { from: 'from-purple-500', to: 'to-pink-500', glow: 'shadow-purple-500/50' },
                          { from: 'from-amber-500', to: 'to-orange-500', glow: 'shadow-amber-500/50' },
                          { from: 'from-emerald-500', to: 'to-teal-500', glow: 'shadow-emerald-500/50' }
                        ];
                        const colorScheme = colors[index % 4];
                        const isPremium = false; // All tracks free
                        const isSelected = selectedTrack === track.id;
                        
                        return (
                          <button
                            key={track.id}
                            onClick={() => {
                              if (!isPremium) {
                                setIsPlaying(false);
                                setSelectedTrack(track.id);
                                setShowTrackInfo(false);
                              }
                            }}
                            disabled={isPremium}
                            className={`relative p-6 rounded-2xl transition-all duration-300 transform ${
                              isSelected 
                                ? `bg-gradient-to-br ${colorScheme.from} ${colorScheme.to} scale-105 shadow-2xl ${colorScheme.glow}` 
                                : isPremium
                                  ? 'bg-gray-800/50 cursor-not-allowed opacity-60'
                                  : `glass hover:scale-105 hover:shadow-xl hover:${colorScheme.glow}`
                            }`}
                          >
                            {isPremium && (
                              <div className="absolute -top-2 -right-2 bg-gradient-to-r from-yellow-400 to-amber-500 text-xs font-black px-3 py-1 rounded-full shadow-lg">
                                PREMIUM
                              </div>
                            )}
                            
                            <div className={`text-2xl mb-2 ${isSelected ? 'text-white' : isPremium ? 'text-gray-500' : 'text-purple-300'}`}>
                              {index === 0 ? 'üéµ' : index === 1 ? 'üåå' : index === 2 ? '‚òÅÔ∏è' : 'üåä'}
                            </div>
                            
                            <div className={`font-bold text-lg ${isSelected ? 'text-white' : isPremium ? 'text-gray-500' : 'text-white'}`}>
                              {track.name}
                            </div>
                            
                            {isSelected && (
                              <div className="absolute inset-0 rounded-2xl animate-pulse" style={{
                                boxShadow: `0 0 30px ${colorScheme.glow}`
                              }}></div>
                            )}
                          </button>
                        );
                      })}
                    </div>
                    
                    {/* Track Info Button */}
                    <div className="text-center mt-4">
                      <button
                        onClick={() => setShowTrackInfo(!showTrackInfo)}
                        className="glass px-4 py-2 rounded-lg text-purple-300 hover:text-white transition-all text-sm flex items-center gap-2 mx-auto"
                      >
                        <svg className="w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                          <path fillRule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clipRule="evenodd" />
                        </svg>
                        Track Info
                      </button>
                    </div>
                    
                    {showTrackInfo && currentTrack && (
                      <div className="fade-in mt-4 p-4 glass rounded-xl max-w-md mx-auto">
                        <div className="text-white font-semibold mb-2">{currentTrack.name}</div>
                        <div className="text-purple-200 text-sm mb-2">{currentTrack.description}</div>
                        <div className="text-purple-300 text-xs">
                          {currentTrack.artist} ¬∑ {currentTrack.duration}
                        </div>
                      </div>
                    )}
                  </div>

                  <div className="flex gap-3 mb-8 justify-center">
                    <button 
                      onClick={() => setIsCustomMode(false)} 
                      className={`px-6 py-3 rounded-xl font-semibold transition-all ${!isCustomMode ? 'bg-purple-500 text-white glow' : 'glass text-purple-300 hover:bg-white/10'}`}
                    >
                      {t.preset}
                    </button>
                    <button 
                      onClick={() => setIsCustomMode(true)} 
                      className={`px-6 py-3 rounded-xl font-semibold transition-all ${isCustomMode ? 'bg-purple-500 text-white glow' : 'glass text-purple-300 hover:bg-white/10'}`}
                    >
                      {t.custom}
                    </button>
                  </div>

                  {/* Frequency Selector Title */}
                  <h2 className="text-3xl md:text-4xl font-black text-center mb-8 bg-gradient-to-r from-pink-400 via-purple-400 to-cyan-400 bg-clip-text text-transparent">
                    Select Your Frequency
                  </h2>

                  {!isCustomMode ? (
                    <div className="grid grid-cols-3 md:grid-cols-5 gap-4 mb-10">
                      {frequencies.map(freq => {
                        const isSelected = selectedFreq === freq.hz;
                        return (
                          <button 
                            key={freq.hz} 
                            onClick={() => setSelectedFreq(freq.hz)}
                            className={`relative p-4 rounded-2xl transition-all duration-300 transform overflow-hidden group ${
                              isSelected 
                                ? 'scale-110 shadow-2xl' 
                                : 'hover:scale-105 hover:shadow-xl'
                            }`}
                            style={{ 
                              background: isSelected 
                                ? `linear-gradient(135deg, ${freq.color}80, ${freq.color}40)`
                                : 'rgba(255,255,255,0.03)',
                              border: `3px solid ${freq.color}`,
                              boxShadow: isSelected 
                                ? `0 0 30px ${freq.color}80, 0 0 60px ${freq.color}40, inset 0 0 20px ${freq.color}20`
                                : `0 0 0 ${freq.color}00`
                            }}
                          >
                            {/* Animated background glow on hover */}
                            <div 
                              className={`absolute inset-0 opacity-0 group-hover:opacity-100 transition-opacity duration-300 ${isSelected ? 'opacity-100' : ''}`}
                              style={{
                                background: `radial-gradient(circle at center, ${freq.color}30, transparent 70%)`,
                                animation: isSelected ? 'pulse 2s ease-in-out infinite' : 'none'
                              }}
                            ></div>
                            
                            {/* 3D shine effect */}
                            <div 
                              className="absolute inset-0 opacity-0 group-hover:opacity-100 transition-opacity duration-300"
                              style={{
                                background: `linear-gradient(135deg, ${freq.color}20 0%, transparent 50%)`,
                              }}
                            ></div>
                            
                            {/* Content */}
                            <div className="relative z-10">
                              <div 
                                className={`text-2xl md:text-3xl font-black mb-1 transition-all duration-300 ${
                                  isSelected ? 'text-white' : 'text-white/90 group-hover:text-white'
                                }`}
                                style={{ 
                                  textShadow: isSelected 
                                    ? `0 0 20px ${freq.color}, 0 0 40px ${freq.color}80`
                                    : 'none'
                                }}
                              >
                                {freq.hz}
                              </div>
                              <div className={`text-xs font-semibold transition-all duration-300 ${
                                isSelected ? 'text-white' : 'text-purple-300 group-hover:text-white'
                              }`}>
                                {freq.title}
                              </div>
                            </div>
                            
                            {/* Selected indicator */}
                            {isSelected && (
                              <div 
                                className="absolute -top-1 -right-1 w-3 h-3 rounded-full animate-ping"
                                style={{ backgroundColor: freq.color }}
                              ></div>
                            )}
                            
                            {/* Border glow animation */}
                            {isSelected && (
                              <div 
                                className="absolute inset-0 rounded-2xl animate-pulse"
                                style={{
                                  boxShadow: `0 0 20px ${freq.color}, inset 0 0 20px ${freq.color}40`
                                }}
                              ></div>
                            )}
                          </button>
                        );
                      })}
                    </div>
                  ) : (
                    <div className="mb-10">
                      <div className="flex items-center gap-4 mb-4">
                        <input 
                          type="range" 
                          min="200" 
                          max="1000" 
                          step="1" 
                          value={customFreq} 
                          onChange={(e) => setCustomFreq(parseInt(e.target.value))}
                          className="flex-1 h-3 rounded-full appearance-none cursor-pointer"
                          style={{ background: `linear-gradient(to right, ${getFrequencyColor()}, #ec4899)` }} 
                        />
                        <input 
                          type="number" 
                          min="200" 
                          max="1000" 
                          value={customFreq} 
                          onChange={(e) => setCustomFreq(parseInt(e.target.value))}
                          className="w-24 px-4 py-2 glass text-white text-center rounded-lg font-semibold" 
                        />
                      </div>
                      <div className="flex justify-between text-xs text-purple-300">
                        <span>200 Hz</span>
                        <span>1000 Hz</span>
                      </div>
                    </div>
                  )}

                  <div className="flex items-center gap-6 mb-8">
                    <button 
                      onClick={handlePlayPause} 
                      disabled={isLoading}
                      className="glow flex-shrink-0 w-20 h-20 rounded-full bg-gradient-to-r from-purple-500 to-pink-500 flex items-center justify-center hover:scale-110 active:scale-95 transition-all shadow-2xl disabled:opacity-50 disabled:cursor-not-allowed"
                    >
                      {isPlaying ? 
                        <Pause className="w-10 h-10 text-white" fill="white" /> : 
                        <Play className="w-10 h-10 text-white ml-1" fill="white" />
                      }
                    </button>
                    
                    <div className="flex-1 flex items-center gap-4">
                      <Volume2 className="w-6 h-6 text-purple-300 flex-shrink-0" />
                      <input 
                        type="range" 
                        min="0" 
                        max="1" 
                        step="0.01" 
                        value={volume} 
                        onChange={(e) => setVolume(parseFloat(e.target.value))}
                        className="flex-1 h-2 rounded-full appearance-none cursor-pointer bg-white/20" 
                      />
                      <span className="text-white text-sm font-medium w-10">{Math.round(volume * 100)}%</span>
                    </div>
                  </div>

                  <button 
                    onClick={() => { setShowInfo(!showInfo); setShowMission(false); setShowAbout(false); }}
                    className="w-full glass px-6 py-3 rounded-xl text-purple-300 hover:bg-white/10 transition-all font-semibold flex items-center justify-center gap-2"
                  >
                    <Music className="w-5 h-5" />
                    {showInfo ? '‚ñº' : '‚ñ∂'} {t.howItWorks}
                  </button>

                  {showInfo && (
                    <div className="fade-in mt-4 p-6 glass rounded-xl">
                      <div className="text-purple-200 text-sm leading-relaxed">{t.description}</div>
                    </div>
                  )}
                  </>
                  )}
                </div>

                <div className="text-center mt-8 space-y-2">
                  <div className="text-purple-300/80 text-sm font-light">{t.footer}</div>
                  <div className="text-purple-300/70 text-xs">{t.musicCredit}</div>
                  <div className="text-purple-300/60 text-xs">{t.copyright}</div>
                </div>
              </div>

              <style>{`
                input[type="range"]::-webkit-slider-thumb { 
                  appearance: none; 
                  width: 24px; 
                  height: 24px; 
                  border-radius: 50%; 
                  background: white; 
                  cursor: pointer; 
                  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.5), 0 0 0 4px rgba(255, 255, 255, 0.2); 
                }
                input[type="range"]::-moz-range-thumb { 
                  width: 24px; 
                  height: 24px; 
                  border-radius: 50%; 
                  background: white; 
                  cursor: pointer; 
                  border: none; 
                  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.5), 0 0 0 4px rgba(255, 255, 255, 0.2); 
                }
                input[type="number"]::-webkit-inner-spin-button,
                input[type="number"]::-webkit-outer-spin-button { 
                  -webkit-appearance: none; 
                  margin: 0; 
                }
              `}</style>
            </div>
          );
        }
        
        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<TuneIn />);
    </script>
</body>
</html>
