<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tune In - Audio Frequency Converter</title>
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700;900&display=swap');
        * { font-family: 'Inter', sans-serif; }
        .glass { background: rgba(255, 255, 255, 0.05); backdrop-filter: blur(20px); border: 1px solid rgba(255, 255, 255, 0.1); }
        .glow { box-shadow: 0 0 40px rgba(168, 85, 247, 0.4), 0 0 80px rgba(236, 72, 153, 0.2); }
        .frequency-pulse { animation: pulse 2s ease-in-out infinite; }
        @keyframes pulse { 0%, 100% { transform: scale(1); opacity: 0.8; } 50% { transform: scale(1.02); opacity: 1; } }
    </style>
</head>
<body>
    <div id="root"></div>
    <script type="text/babel">
        const Play = (props) => (<svg {...props} xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><polygon points="5 3 19 12 5 21 5 3"></polygon></svg>);
        const Pause = (props) => (<svg {...props} xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><rect x="6" y="4" width="4" height="16"></rect><rect x="14" y="4" width="4" height="16"></rect></svg>);
        const Volume2 = (props) => (<svg {...props} xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><polygon points="11 5 6 9 2 9 2 15 6 15 11 19 11 5"></polygon><path d="M15.54 8.46a5 5 0 0 1 0 7.07"></path><path d="M19.07 4.93a10 10 0 0 1 0 14.14"></path></svg>);
        const Music = (props) => (<svg {...props} xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><path d="M9 18V5l12-2v13"></path><circle cx="6" cy="18" r="3"></circle><circle cx="18" cy="16" r="3"></circle></svg>);

        const PRESET_FREQUENCIES = [
          { hz: 396, name: "396 Hz", description: "Liberazione paura", color: "#ef4444" },
          { hz: 417, name: "417 Hz", description: "Cambiamento", color: "#f59e0b" },
          { hz: 432, name: "432 Hz", description: "Armonia universale", color: "#10b981" },
          { hz: 440, name: "440 Hz", description: "Standard (LA)", color: "#3b82f6" },
          { hz: 528, name: "528 Hz", description: "Trasformazione DNA", color: "#8b5cf6" },
          { hz: 639, name: "639 Hz", description: "Relazioni", color: "#ec4899" },
          { hz: 741, name: "741 Hz", description: "Risveglio intuizione", color: "#f97316" },
          { hz: 852, name: "852 Hz", description: "Ordine spirituale", color: "#06b6d4" }
        ];

        function TuneIn() {
          const [selectedFreq, setSelectedFreq] = React.useState(432);
          const [customFreq, setCustomFreq] = React.useState(432);
          const [isPlaying, setIsPlaying] = React.useState(false);
          const [currentTime, setCurrentTime] = React.useState(0);
          const [duration, setDuration] = React.useState(0);
          const [volume, setVolume] = React.useState(0.7);
          const [isCustomMode, setIsCustomMode] = React.useState(false);
          
          const audioContextRef = React.useRef(null);
          const sourceNodeRef = React.useRef(null);
          const gainNodeRef = React.useRef(null);
          const audioElementRef = React.useRef(null);
          const pitchShiftRef = React.useRef(null);

          const AUDIO_URL = "https://archive.org/download/track_20251128_1844/Fioritura%20senza%20frutteto.mp3";
          const STANDARD_FREQ = 440;

          React.useEffect(() => {
            const audio = new Audio(AUDIO_URL);
            audioElementRef.current = audio;
            
            audio.addEventListener('loadedmetadata', () => setDuration(audio.duration));
            audio.addEventListener('timeupdate', () => setCurrentTime(audio.currentTime));
            audio.addEventListener('ended', () => setIsPlaying(false));

            const AudioContext = window.AudioContext || window.webkitAudioContext;
            audioContextRef.current = new AudioContext();
            
            const source = audioContextRef.current.createMediaElementSource(audio);
            sourceNodeRef.current = source;
            
            const gainNode = audioContextRef.current.createGain();
            gainNode.gain.value = volume;
            gainNodeRef.current = gainNode;

            source.connect(gainNode);
            gainNode.connect(audioContextRef.current.destination);

            return () => {
              audio.pause();
              if (audioContextRef.current) {
                audioContextRef.current.close();
              }
            };
          }, []);

          React.useEffect(() => {
            if (gainNodeRef.current) {
              gainNodeRef.current.gain.value = volume;
            }
          }, [volume]);

          React.useEffect(() => {
            if (audioElementRef.current && audioContextRef.current) {
              const targetFreq = isCustomMode ? customFreq : selectedFreq;
              const ratio = targetFreq / STANDARD_FREQ;
              audioElementRef.current.playbackRate = ratio;
            }
          }, [selectedFreq, customFreq, isCustomMode]);

          const handlePlayPause = async () => {
            if (!audioElementRef.current) return;
            
            if (audioContextRef.current.state === 'suspended') {
              await audioContextRef.current.resume();
            }

            if (isPlaying) {
              audioElementRef.current.pause();
            } else {
              try {
                await audioElementRef.current.play();
              } catch (err) {
                console.error("Playback error:", err);
              }
            }
            setIsPlaying(!isPlaying);
          };

          const handleSeek = (e) => {
            const time = parseFloat(e.target.value);
            if (audioElementRef.current) {
              audioElementRef.current.currentTime = time;
              setCurrentTime(time);
            }
          };

          const formatTime = (seconds) => {
            const h = Math.floor(seconds / 3600);
            const m = Math.floor((seconds % 3600) / 60);
            const s = Math.floor(seconds % 60);
            if (h > 0) return `${h}:${m.toString().padStart(2, '0')}:${s.toString().padStart(2, '0')}`;
            return `${m}:${s.toString().padStart(2, '0')}`;
          };

          const getFrequencyColor = () => {
            const freq = isCustomMode ? customFreq : selectedFreq;
            const preset = PRESET_FREQUENCIES.find(p => p.hz === freq);
            return preset ? preset.color : '#8b5cf6';
          };

          const currentPreset = PRESET_FREQUENCIES.find(p => p.hz === selectedFreq);

          return (
            <div className="min-h-screen bg-gradient-to-br from-indigo-950 via-purple-950 to-pink-950 flex items-center justify-center p-4 relative overflow-hidden">
              <div className="absolute inset-0 opacity-30">
                <div className="absolute top-1/4 left-1/4 w-96 h-96 bg-purple-500 rounded-full blur-3xl"></div>
                <div className="absolute bottom-1/4 right-1/4 w-96 h-96 bg-pink-500 rounded-full blur-3xl"></div>
              </div>

              <div className="w-full max-w-4xl relative z-10">
                <div className="text-center mb-8">
                  <div className="inline-flex items-center gap-3 mb-4">
                    <Music className="w-12 h-12 text-purple-400" />
                    <h1 className="text-6xl font-black text-white tracking-tight">
                      Tune<span className="text-transparent bg-clip-text bg-gradient-to-r from-purple-400 to-pink-400">In</span>
                    </h1>
                  </div>
                  <p className="text-purple-300 text-sm uppercase tracking-widest font-light">Audio Frequency Converter</p>
                </div>

                <div className="glass rounded-3xl p-8 md:p-12">
                  
                  {/* Frequency Display */}
                  <div className="frequency-pulse relative mb-10 text-center py-12 rounded-3xl border-2 transition-all duration-300" 
                       style={{ 
                         borderColor: getFrequencyColor(),
                         background: `linear-gradient(135deg, ${getFrequencyColor()}15, ${getFrequencyColor()}25)`
                       }}>
                    <div className="text-8xl md:text-9xl font-black text-white mb-2 tracking-tighter" 
                         style={{ textShadow: `0 0 40px ${getFrequencyColor()}` }}>
                      {isCustomMode ? customFreq : selectedFreq}
                    </div>
                    <div className="text-3xl font-light text-purple-200 tracking-wider">Hz</div>
                    {!isCustomMode && currentPreset && (
                      <div className="mt-4">
                        <div className="text-purple-300 text-lg font-medium">{currentPreset.description}</div>
                      </div>
                    )}
                  </div>

                  {/* Mode Toggle */}
                  <div className="flex gap-3 mb-8 justify-center">
                    <button 
                      onClick={() => setIsCustomMode(false)}
                      className={`px-6 py-3 rounded-xl font-semibold transition-all ${!isCustomMode ? 'bg-purple-500 text-white' : 'glass text-purple-300 hover:bg-white/10'}`}>
                      Preset
                    </button>
                    <button 
                      onClick={() => setIsCustomMode(true)}
                      className={`px-6 py-3 rounded-xl font-semibold transition-all ${isCustomMode ? 'bg-purple-500 text-white' : 'glass text-purple-300 hover:bg-white/10'}`}>
                      Personalizzato
                    </button>
                  </div>

                  {/* Frequency Selection */}
                  {!isCustomMode ? (
                    <div className="grid grid-cols-2 md:grid-cols-4 gap-3 mb-10">
                      {PRESET_FREQUENCIES.map(freq => (
                        <button
                          key={freq.hz}
                          onClick={() => setSelectedFreq(freq.hz)}
                          className={`p-4 rounded-xl transition-all ${selectedFreq === freq.hz ? 'ring-2 ring-white' : 'hover:bg-white/10'}`}
                          style={{ 
                            background: selectedFreq === freq.hz ? `${freq.color}40` : 'rgba(255,255,255,0.05)',
                            borderLeft: `4px solid ${freq.color}`
                          }}>
                          <div className="text-2xl font-bold text-white">{freq.hz}</div>
                          <div className="text-xs text-purple-300 mt-1">{freq.description}</div>
                        </button>
                      ))}
                    </div>
                  ) : (
                    <div className="mb-10">
                      <div className="flex items-center gap-4 mb-4">
                        <input
                          type="range"
                          min="200"
                          max="1000"
                          step="1"
                          value={customFreq}
                          onChange={(e) => setCustomFreq(parseInt(e.target.value))}
                          className="flex-1 h-3 rounded-full appearance-none cursor-pointer"
                          style={{ background: `linear-gradient(to right, ${getFrequencyColor()}, #ec4899)` }}
                        />
                        <input
                          type="number"
                          min="200"
                          max="1000"
                          value={customFreq}
                          onChange={(e) => setCustomFreq(parseInt(e.target.value))}
                          className="w-24 px-4 py-2 glass text-white text-center rounded-lg font-semibold"
                        />
                      </div>
                      <div className="flex justify-between text-xs text-purple-300">
                        <span>200 Hz</span>
                        <span>1000 Hz</span>
                      </div>
                    </div>
                  )}

                  {/* Player Controls */}
                  <div className="flex items-center gap-6 mb-8">
                    <button 
                      onClick={handlePlayPause}
                      className="glow flex-shrink-0 w-20 h-20 rounded-full bg-gradient-to-r from-purple-500 to-pink-500 flex items-center justify-center hover:scale-110 active:scale-95 transition-all shadow-2xl">
                      {isPlaying ? <Pause className="w-10 h-10 text-white" fill="white" /> : <Play className="w-10 h-10 text-white ml-1" fill="white" />}
                    </button>

                    <div className="flex-1 flex items-center gap-4">
                      <Volume2 className="w-6 h-6 text-purple-300 flex-shrink-0" />
                      <input 
                        type="range" 
                        min="0" 
                        max="1" 
                        step="0.01" 
                        value={volume}
                        onChange={(e) => setVolume(parseFloat(e.target.value))}
                        className="flex-1 h-2 rounded-full appearance-none cursor-pointer bg-white/20" />
                      <span className="text-white text-sm font-medium w-10">{Math.round(volume * 100)}%</span>
                    </div>
                  </div>

                  {/* Progress Bar */}
                  <div className="glass rounded-full p-2">
                    <input
                      type="range"
                      min="0"
                      max={duration}
                      value={currentTime}
                      onChange={handleSeek}
                      className="w-full h-2 rounded-full appearance-none cursor-pointer bg-white/10"
                    />
                    <div className="flex justify-between text-xs text-purple-300 mt-2 px-2 font-medium">
                      <span>{formatTime(currentTime)}</span>
                      <span>{formatTime(duration)}</span>
                    </div>
                  </div>

                  {/* Info */}
                  <div className="mt-8 p-4 glass rounded-xl">
                    <div className="text-purple-200 text-sm leading-relaxed">
                      <strong>Come funziona:</strong> Questo convertitore modifica la frequenza di riproduzione dell'audio. 
                      La frequenza standard è 440 Hz (LA). Frequenze diverse possono avere effetti diversi secondo la teoria delle frequenze curative.
                    </div>
                  </div>
                </div>

                <div className="text-center mt-8 text-purple-300/60 text-sm font-light">
                  © 2025 Tune In · Audio Frequency Healing
                </div>
              </div>

              <style>{`
                input[type="range"]::-webkit-slider-thumb { appearance: none; width: 24px; height: 24px; border-radius: 50%; background: white; cursor: pointer; box-shadow: 0 4px 20px rgba(0, 0, 0, 0.5), 0 0 0 4px rgba(255, 255, 255, 0.2); }
                input[type="range"]::-moz-range-thumb { width: 24px; height: 24px; border-radius: 50%; background: white; cursor: pointer; border: none; box-shadow: 0 4px 20px rgba(0, 0, 0, 0.5), 0 0 0 4px rgba(255, 255, 255, 0.2); }
                input[type="number"]::-webkit-inner-spin-button,
                input[type="number"]::-webkit-outer-spin-button { -webkit-appearance: none; margin: 0; }
              `}</style>
            </div>
          );
        }
        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<TuneIn />);
    </script>
</body>
</html>Complete rewrite - Audio Frequency Converter (healing frequencies)
